import{a as it}from"./chunk-6OG742R5.js";import{a as ae}from"./chunk-OXQ5KQIN.js";import{a as Le,b as Re,c as He,d as Ue}from"./chunk-CIB24OPD.js";import{b as Ke}from"./chunk-ZCJ2MPAQ.js";import{a as ot}from"./chunk-WRQISQQJ.js";import{a as O,b as Je,c as Ye,d as qe,e as Qe,f as We,g as Ze,h as Xe,i as et,j as tt,k as at}from"./chunk-7SR5BHXB.js";import{a as $e}from"./chunk-4EKE7ICE.js";import{a as T,b as _}from"./chunk-QXSUWR23.js";import{b as ke,c as Fe,e as Ne,f as Ae,g as te}from"./chunk-QXQ3G5IP.js";import{a as M}from"./chunk-5NBA5GWV.js";import"./chunk-BYXBJQAS.js";import{a as rt}from"./chunk-APDG2UCO.js";import{b as H,e as y,f as P}from"./chunk-B6LR5YRM.js";import{A as Ve,B as I,C as je,D as Be,E as ie,F as re,O as oe,R as ze,S as Ge,b as U,d as Pe,e as $,f as K,g as J,h as Y,i as q,j as Q,k as De,l as Ie,n as W,o as Me,p as Z,q as Oe,s as D,t as X,u as ee,v as N,w as Te,x as we,y as A}from"./chunk-Q7QCMHQW.js";import{k as xe,m as ye,o as ge}from"./chunk-33ZGYKW3.js";import"./chunk-CARY4E7O.js";import{$c as Se,E as V,Ea as fe,Hb as o,I as j,Ib as i,Jb as u,N as B,Nb as E,Qb as g,Sb as c,Wb as _e,Xb as be,Xc as x,Yb as ve,Yc as R,ac as l,bc as F,cb as n,cc as h,da as z,db as f,dc as Ee,lc as L,mc as he,na as S,nc as Ce,oa as G,ub as d,v as w,wa as b,xa as v,yb as m}from"./chunk-KCGDNXPD.js";function xt(a,e){if(a&1){let t=E();o(0,"button",32),g("click",function(){b(t);let s=c();return v(s.actionFunction())}),o(1,"mat-icon"),l(2,"check"),i(),l(3),i()}if(a&2){let t=c();n(3),h(" ",t.acao," ")}}function yt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("razao")," ")}}function Pt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("cadastr")," ")}}function Dt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("fantasi")," ")}}function It(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("cnpj_cpf")," ")}}function Mt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("inscri")," ")}}function Ot(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("ruaf")," ")}}function kt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("nrof")," ")}}function Ft(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("complementof")," ")}}function Nt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("bairrof")," ")}}function At(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("cidadef")," ")}}function Tt(a,e){if(a&1&&(o(0,"mat-option",36),l(1),i()),a&2){let t=e.$implicit;m("value",t.sigla),n(),Ee(" ",t.sigla,"-",t.nome," ")}}function wt(a,e){if(a&1&&(o(0,"mat-form-field",33)(1,"mat-label"),l(2,"Estado:"),i(),o(3,"mat-select",34),d(4,Tt,2,3,"mat-option",35),i()()),a&2){let t=c();n(4),m("ngForOf",t.ufs)}}function Vt(a,e){if(a&1&&(o(0,"mat-form-field",33)(1,"mat-label"),l(2,"Estado:"),i(),u(3,"input",37),i()),a&2){let t=c();n(3),m("readonly",t.readOnly)}}function jt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("cepf")," ")}}function Bt(a,e){a&1&&(o(0,"mat-error"),l(1,"E-Mail Inv\xE1lido! "),i())}function zt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("tel1")," ")}}function Gt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("tel2")," ")}}function Lt(a,e){if(a&1&&(o(0,"mat-error"),l(1),i()),a&2){let t=c();n(),h("",t.getMensafield("obs")," ")}}var ne=class a{constructor(e,t,r,s,p,k,C){this.formBuilder=e;this.empresaService=t;this.globalService=r;this.appSnackBar=s;this.simNaoPipe=p;this.data=k;this.dialogRef=C;console.log("Empresa Dialog Constructor"),this.formulario=e.group({id:[{value:"",disabled:!0}],razao:[{value:""},[_(3,40,!0)]],cadastr:[{value:""},[Ue(!0)]],fantasi:[{value:""},[_(3,40,!0)]],cnpj_cpf:[{value:""},[He(!0)]],inscri:[{value:""},[_(0,20)]],ruaf:[{value:""},[_(3,80,!0)]],nrof:[{value:""},[_(1,10,!0)]],complementof:[{value:""},[_(0,30)]],bairrof:[{value:""},[_(3,40,!0)]],cidadef:[{value:""},[_(3,40,!0)]],uff:[{value:""},[_(2,2,!0)]],uff_:[{value:""}],cepf:[{value:""},[Re(!0)]],tel1:[{value:""},[_(0,23,!0)]],tel2:[{value:""},[_(0,23)]],email:[{value:""},[Pe.email,_(0,100)]],obs:[{value:""},[_(0,200)]]}),this.formulario.get("cnpj_cpf")?.valueChanges.subscribe(ue=>{let gt=ue?.replace(/\D/g,"")||"";this.cpfOuCnpjMask=gt.length>11?"00.000.000/0000-00":"000.000.000-00"}),this.ufs=this.estadoSrv.getEstados()}formulario;ufs=[];erro;acao="Sem Defini\xE7\xE3o";idAcao=1;readOnly=!0;inscricaoGetEmpresa;inscricaoAcao;labelCadastro="";estadoSrv=new Le;respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xC3O"}];cpfOuCnpjMask="000.000.000-00";ngOnInit(){console.log("Empresa Dialog OnInit"),this.idAcao=this.data.opcao,this.setAcao(this.data.opcao),this.setValue()}ngOnDestroy(){this.inscricaoGetEmpresa?.unsubscribe(),this.inscricaoAcao?.unsubscribe()}actionFunction(){this.formulario.valid?this.executaAcao():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xE1rio Com Campos Inv\xE1lidos.","OK"))}onCancel(){this.data.processar=!1,this.dialogRef.close(this.data)}closeModal(){this.data.processar=!0,this.dialogRef.close(this.data)}setValue(){this.formulario.setValue({id:this.data.empresa.id,razao:this.data.empresa.razao,cadastr:this.data.empresa.cadastr,cnpj_cpf:this.data.empresa.cnpj_cpf,inscri:this.data.empresa.inscri,fantasi:this.data.empresa.fantasi,ruaf:this.data.empresa.ruaf,nrof:this.data.empresa.nrof,complementof:this.data.empresa.complementof,bairrof:this.data.empresa.bairrof,cidadef:this.data.empresa.cidadef,uff:this.data.empresa.uff,uff_:this.idAcao==3||this.idAcao==4?this.data.empresa.uff:"",cepf:this.data.empresa.cepf,tel1:this.data.empresa.tel1,tel2:this.data.empresa.tel2,email:this.data.empresa.email,obs:this.data.empresa.obs})}getLabelCancel(){return this.idAcao==3?"Voltar":"Cancelar"}setAcao(e){switch(+e){case 1:this.acao="Gravar",this.labelCadastro="Empresas - Inclus\xE3o.",this.readOnly=!1;break;case 2:this.acao="Gravar",this.labelCadastro="Empresas - Altera\xE7\xE3o.",this.readOnly=!1;break;case 3:this.acao="Voltar",this.labelCadastro="Empresas - Consulta.",this.readOnly=!0;break;case 4:this.acao="Excluir",this.labelCadastro="Empresas - Exclus\xE3o.",this.readOnly=!0;break;case 5:this.acao="Gravar",this.labelCadastro="Empresas - Atualiza\xE7\xE3o",this.readOnly=!1;break;default:break}}executaAcao(){switch(this.data.empresa.cnpj_cpf=this.formulario.value.cnpj_cpf,this.data.empresa.razao=this.formulario.value.razao,this.data.empresa.fantasi=this.formulario.value.fantasi,this.data.empresa.inscri=this.formulario.value.inscri,this.data.empresa.cadastr=this.formulario.value.cadastr,this.data.empresa.ruaf=this.formulario.value.ruaf,this.data.empresa.nrof=this.formulario.value.nrof,this.data.empresa.complementof=this.formulario.value.complementof,this.data.empresa.bairrof=this.formulario.value.bairrof,this.data.empresa.cidadef=this.formulario.value.cidadef,this.data.empresa.uff=this.formulario.value.uff,this.data.empresa.cepf=this.formulario.value.cepf,this.data.empresa.tel1=this.formulario.value.tel1,this.data.empresa.tel2=this.formulario.value.tel2,this.data.empresa.email=this.formulario.value.email,this.data.empresa.obs=this.formulario.value.obs,+this.idAcao){case 1:this.data.empresa.user_insert=this.globalService.getEmpresa().id,this.inscricaoAcao=this.empresaService.empresaInsert(this.data.empresa).subscribe({next:e=>{this.appSnackBar.openSuccessSnackBar("Empresa Incluida Com Sucesso !","OK"),this.data.empresa=e,this.getEmpresa(this.data.empresa)},error:e=>{console.log("error =>",e),this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xE3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")}});break;case 2:this.data.empresa.user_update=this.globalService.getEmpresa().id,this.inscricaoAcao=this.empresaService.empresaUpdate(this.data.empresa).subscribe({next:e=>{this.appSnackBar.openSuccessSnackBar("Empresa Alterada Com Sucesso !","OK"),this.data.empresa=e,this.getEmpresa(this.data.empresa)},error:e=>{this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xE7\xE3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")}});break;case 5:this.data.empresa.user_update=this.globalService.getEmpresa().id,this.inscricaoAcao=this.empresaService.empresaUpdate(this.data.empresa).subscribe({next:e=>{this.appSnackBar.openSuccessSnackBar("Empresa Alterado Com Sucesso !","OK"),this.data.empresa=e,this.getEmpresa(this.data.empresa)},error:e=>{this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xE7\xE3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")}});break;case 4:this.inscricaoAcao=this.empresaService.empresaDelete(this.data.empresa.id).subscribe({next:e=>{this.appSnackBar.openSuccessSnackBar("Empresa Excluida Com Sucesso !","OK"),this.data.empresa=e,this.data.processar=!0,this.closeModal()},error:e=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xE3o ${e.error.tabela} - ${e.error.erro} - ${e.error.message}`,"OK")}});break;default:break}}getAcoes(){return T}NoValidtouchedOrDirty(e){return!!(!this.formulario.get(e)?.valid&&(this.formulario.get(e)?.touched||this.formulario.get(e)?.dirty))}getMensafield(e){return this.formulario.get(e)?.errors?.message}setEmailReadOnly(){return this.idAcao==5?!0:this.readOnly}getEmpresa(e){this.inscricaoGetEmpresa=this.empresaService.getEmpresa(e.id).subscribe({next:t=>{this.data.empresa=t,this.closeModal()},error:t=>{this.appSnackBar.openFailureSnackBar("Problemas na Consulta Da Empresa '","OK"),this.closeModal}})}static \u0275fac=function(t){return new(t||a)(f(Q),f(ae),f(y),f(P),f($e),f(we),f(Te))};static \u0275cmp=S({type:a,selectors:[["app-empresa-dialog"]],decls:101,vars:37,consts:[[1,"toolbar-alinhada","dialog-header"],["color","primary"],[1,"example-spacer"],[1,"button-container"],["mat-raised-button","","color","#FFFFFF",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-content"],["autocomplete","off",3,"formGroup"],[1,"col-med-4"],["appearance","outline",1,"col-70"],["matInput","","formControlName","id"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","razao","autofocus","","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[4,"ngIf"],["appearance","outline",1,"col-max"],["matInput","","formControlName","cadastr","mask","00/00/0000","placeholder","DD/MM/AAAA","placeholder","DD/MM/AAAA","readonly","true",3,"dropSpecialCharacters"],[1,"col-med-3"],["matInput","","formControlName","fantasi","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","cnpj_cpf",3,"mask","readonly"],["matInput","","formControlName","inscri","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","ruaf","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","nrof","oninput","this.value = this.value.toUpperCase()",3,"readonly"],[1,"col-med-1"],["matInput","","formControlName","complementof","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","bairrof","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","cidadef","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","cepf","mask","99999-999",3,"readonly"],["matInput","","formControlName","email",3,"readonly"],["matInput","","formControlName","tel1","mask","(00) 0 0000-0000",3,"readonly"],["matInput","","formControlName","tel2","mask","(00) 0 0000-0000",3,"readonly"],["matInput","","formControlName","obs","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["mat-raised-button","","color","#FFFFFF",3,"click"],["field","","appearance","outline",1,"col-max"],["formControlName","uff"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","uff_",3,"readonly"]],template:function(t,r){if(t&1&&(o(0,"div",0)(1,"mat-toolbar",1)(2,"span",2)(3,"mat-label"),l(4),i()(),o(5,"div",3),d(6,xt,4,1,"button",4),o(7,"button",5),g("click",function(){return r.onCancel()}),o(8,"mat-icon"),l(9,"cancel"),i(),l(10),i()()()(),o(11,"mat-dialog-content",6)(12,"form",7)(13,"div",8)(14,"mat-form-field",9)(15,"mat-label"),l(16,"C\xD3DIGO"),i(),u(17,"input",10),i(),o(18,"mat-form-field",11)(19,"mat-label"),l(20,"Raz\xE3o Social"),i(),u(21,"input",12),d(22,yt,2,1,"mat-error",13),i(),o(23,"mat-form-field",14)(24,"mat-label"),l(25,"Cadastro"),i(),u(26,"input",15),d(27,Pt,2,1,"mat-error",13),i()(),o(28,"div",16)(29,"mat-form-field",14)(30,"mat-label"),l(31,"Fantasia"),i(),u(32,"input",17),d(33,Dt,2,1,"mat-error",13),i(),o(34,"mat-form-field",14)(35,"mat-label"),l(36,"CNPJ/CPF"),i(),u(37,"input",18),d(38,It,2,1,"mat-error",13),i(),o(39,"mat-form-field",14)(40,"mat-label"),l(41,"Inscri\xE7\xE3o Est."),i(),u(42,"input",19),d(43,Mt,2,1,"mat-error",13),i()(),o(44,"div",16)(45,"mat-form-field",11)(46,"mat-label"),l(47,"Endere\xE7o:"),i(),u(48,"input",20),d(49,Ot,2,1,"mat-error",13),i(),o(50,"mat-form-field",14)(51,"mat-label"),l(52,"N\xFAmero"),i(),u(53,"input",21),d(54,kt,2,1,"mat-error",13),i()(),o(55,"div",22)(56,"mat-form-field",14)(57,"mat-label"),l(58,"Complemento:"),i(),u(59,"input",23),d(60,Ft,2,1,"mat-error",13),i()(),o(61,"div",16)(62,"mat-form-field",14)(63,"mat-label"),l(64,"Bairro:"),i(),u(65,"input",24),d(66,Nt,2,1,"mat-error",13),i(),o(67,"mat-form-field",14)(68,"mat-label"),l(69,"Cidade:"),i(),u(70,"input",25),d(71,At,2,1,"mat-error",13),i(),d(72,wt,5,1,"mat-form-field",26)(73,Vt,4,1,"mat-form-field",26),o(74,"mat-form-field",14)(75,"mat-label"),l(76,"CEP:"),i(),u(77,"input",27),d(78,jt,2,1,"mat-error",13),i()(),o(79,"div",16)(80,"mat-form-field",14)(81,"mat-label"),l(82,"E-Mail:"),i(),u(83,"input",28),d(84,Bt,2,0,"mat-error",13),i(),o(85,"mat-form-field",14)(86,"mat-label"),l(87,"Telefone 1:"),i(),u(88,"input",29),d(89,zt,2,1,"mat-error",13),i(),o(90,"mat-form-field",14)(91,"mat-label"),l(92,"Telefone 2:"),i(),u(93,"input",30),d(94,Gt,2,1,"mat-error",13),i()(),o(95,"div",22)(96,"mat-form-field",14)(97,"mat-label"),l(98,"Observa\xE7\xE3o:"),i(),u(99,"input",31),d(100,Lt,2,1,"mat-error",13),i()()()()),t&2){let s;n(4),F(r.labelCadastro),n(2),m("ngIf",r.idAcao!=3),n(4),h(" ",r.getLabelCancel()," "),n(2),m("formGroup",r.formulario),n(9),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("razao")),n(4),m("dropSpecialCharacters",!1),n(),m("ngIf",r.NoValidtouchedOrDirty("cadastr")),n(5),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("fantasi")),n(4),m("mask",r.cpfOuCnpjMask)("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("cnpj_cpf")),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("inscri")),n(5),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("ruaf")),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("nrof")),n(5),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("complementof")),n(5),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("bairrof")),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("cidadef")),n(),m("ngIf",r.idAcao!=r.getAcoes().Consulta&&r.idAcao!=r.getAcoes().Exclusao),n(),m("ngIf",r.idAcao==r.getAcoes().Consulta||r.idAcao==r.getAcoes().Exclusao),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("cepf")),n(5),m("readonly",r.readOnly),n(),m("ngIf",((s=r.formulario.get("email"))==null?null:s.status)=="INVALID"&&r.NoValidtouchedOrDirty("email")),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("tel1")),n(4),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("tel2")),n(5),m("readonly",r.readOnly),n(),m("ngIf",r.NoValidtouchedOrDirty("obs"))}},dependencies:[x,R,W,Me,Ve,D,re,ie,I,je,oe,X,J,U,$,K,Y,q,Ke],styles:[".form-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin:20px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:right;padding:1em;border-bottom:1px solid #ccc;background-color:#f5f5f5;position:sticky;top:0;z-index:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:1em;border-top:1px solid #ccc}"]})};var me=class{id=0;razao="";cnpj_cpf="";pagina=0;tamPagina=50;contador="N";orderby="";sharp=!1};function ft(a,e){try{let t=0;return t=parseInt(Object(e).id,10),isNaN(t)?a.id=0:a.id=t,Object(e).razao?.trim()!==""&&(a.razao=Object(e).razao),Object(e).cnpj_cpf?.trim()!==""&&(a.cnpj_cpf=Object(e).cnpj_cpf),Object(e).orderby?.trim()!==""&&(a.orderby=Object(e).orderby),a}catch(t){throw t}}var se=class{processar=!1;opcao=3;empresa=new H};function Ht(a,e){if(a&1){let t=E();o(0,"mat-icon",9),g("click",function(){b(t);let s=c();return v(s.onGetExcelToEmailOrDownLoad("e-mail"))}),l(1,"mail"),i()}}function Ut(a,e){if(a&1){let t=E();o(0,"mat-icon",10),g("click",function(){b(t);let s=c();return v(s.onGetExcelToEmailOrDownLoad("download"))}),l(1,"cloud_download"),i()}}function $t(a,e){if(a&1&&(o(0,"mat-option",23),l(1),i()),a&2){let t=e.$implicit;m("value",t.sigla),n(),h(" ",t.descricao," ")}}function Kt(a,e){if(a&1){let t=E();o(0,"button",24),g("click",function(){b(t);let s=c(2);return v(s.clearValue("id"))}),o(1,"mat-icon"),l(2,"close"),i()()}}function Jt(a,e){if(a&1){let t=E();o(0,"button",24),g("click",function(){b(t);let s=c(2);return v(s.clearValue("cnpj_cpf"))}),o(1,"mat-icon"),l(2,"close"),i()()}}function Yt(a,e){if(a&1){let t=E();o(0,"button",24),g("click",function(){b(t);let s=c(2);return v(s.clearValue("razao"))}),o(1,"mat-icon"),l(2,"close"),i()()}}function qt(a,e){if(a&1){let t=E();o(0,"form",11)(1,"div",12)(2,"mat-form-field",13)(3,"mat-label"),l(4,"Ordernado Por"),i(),o(5,"mat-select",14),g("selectionChange",function(){b(t);let s=c();return v(s.onChangeParametros())}),d(6,$t,2,2,"mat-option",15),i()(),o(7,"mat-form-field",16)(8,"mat-label"),l(9,"C\xF3digo"),i(),u(10,"input",17),d(11,Kt,3,0,"button",18),i(),o(12,"mat-form-field",16)(13,"mat-label"),l(14,"CNPJ/CPF"),i(),u(15,"input",19),d(16,Jt,3,0,"button",18),i()(),o(17,"div",20)(18,"mat-form-field",21)(19,"mat-label"),l(20,"Raz\xE3o"),i(),u(21,"input",22),d(22,Yt,3,0,"button",18),i()()()}if(a&2){let t=c();m("formGroup",t.formulario),n(6),m("ngForOf",t.orderby),n(5),m("ngIf",t.hasValue("id")),n(5),m("ngIf",t.hasValue("cnpj_cpf")),n(6),m("ngIf",t.hasValue("razao"))}}var pe=class a{constructor(e,t,r,s,p,k,C){this.formBuilder=e;this.globalService=t;this.parametrosSrv=r;this.emailService=s;this.appSnackBar=p;this.EmailDialog=k;this.DownLoadDialog=C;this.formulario=e.group({orderby:[{value:""}],id:[{value:""}],razao:[{value:""}],cnpj_cpf:[{value:""}]}),this.setHide(),this.setValuesNoParam()}paramName="";retorno=!1;email=!1;download=!1;controle_paginas=new M(50,0);hide=!0;change=new fe;changeHide=new fe;inscricaoParametro;inscricaoEmail;formulario;showFiltro=!0;hideAcao="Ocultar";orderby=[{sigla:"000000",descricao:"C\xF3digo"},{sigla:"000001",descricao:"Raz\xE3o Social"},{sigla:"000002",descricao:"CNPJ-CPF"}];parametro=new O;enable_filter=!1;valueChangeSubs=[];ngOnInit(){this.loadParametros()}setEnableFilter(e){if(this.enable_filter=e,!e){this.valueChangeSubs.forEach(p=>p.unsubscribe()),this.valueChangeSubs=[];return}let t=this.formulario.get("id")?.valueChanges.pipe(w(p=>p?.trim()),V(p=>p?.length>0),j(350),B()).subscribe(()=>this.onChangeParametros()),r=this.formulario.get("razao")?.valueChanges.pipe(w(p=>p?.trim()),V(p=>p?.length>0),j(350),B()).subscribe(()=>this.onChangeParametros()),s=this.formulario.get("cnpj_cpf")?.valueChanges.pipe(w(p=>p?.trim()),V(p=>p?.length>0),j(350),B()).subscribe(()=>this.onChangeParametros());this.valueChangeSubs=[t,r,s].filter(p=>!!p)}ngOnDestroy(){this.inscricaoParametro?.unsubscribe(),this.inscricaoEmail?.unsubscribe()}onGetExcelToEmailOrDownLoad(e){e.toUpperCase()=="E-MAIL"?this.openEmailDialog():this.openDownLoadDialog()}sendMail(e){let t=new We;t.id_empresa=this.globalService.getEmpresa().id,t.id_evento=1,t.assunto="Relat\xF3rio Dos Ativos Do Invent\xE1rio",t.destinatario=this.globalService.usuario.email,t.mensagem="Mensagem enviada automaticamento por solicita\xE7\xE3o do usu\xE1rio. Favor Verificar Anexo.",t.fileName=e,this.globalService.setSpin(!0),this.inscricaoEmail=this.emailService.sendEmailV2(t).subscribe({next:r=>{this.appSnackBar.openSuccessSnackBar("E-Mail Enviado Com Sucesso!","OK")},error:r=>{this.appSnackBar.openFailureSnackBar("Falha Ao Enviar O E-Mail","OK")}})}setValues(){let e=this.parametro.getParametro();this.formulario.setValue({orderby:te(this.parametro.getParametro(),"orderby"),id:Ae(this.parametro.getParametro(),"id"),razao:te(this.parametro.getParametro(),"razao"),cnpj_cpf:te(this.parametro.getParametro(),"cnpj_cpf")})}setValuesNoParam(){this.formulario.setValue({orderby:"",id:"",razao:"",cnpj_cpf:""})}setHide(){this.hide=!this.hide,this.hideAcao=this.hide?"Mostrar":"Ocultar"}onlimparParametros(){this.parametro=this.InicializaParametro(),this.setEnableFilter(!1),this.setValues(),this.setEnableFilter(!0),this.onChangeParametros()}InicializaParametro(){let e=new O;return e.id_empresa=this.globalService.getEmpresa().id,e.modulo=this.paramName,e.assinatura="V1.00 06/11/2025",e.id_usuario=this.globalService.getUsuario().id,e.parametro=`
         {
            "id":"",
            "razao":"",
            "cnpj_cpf":"",
            "orderby":"000001",
            "page":1,
            "sharp":false
        }`,e}loadParametros(){this.parametro=this.InicializaParametro(),this.getParametro()}getParametro(){this.globalService.setSpin(!0);let e=new qe;e.id_empresa=this.parametro.id_empresa,e.modulo=this.parametro.modulo,e.assinatura=this.parametro.assinatura,e.id_usuario=this.parametro.id_usuario,this.inscricaoParametro=this.parametrosSrv.getParametrosParametro_01(e).subscribe({next:t=>{this.parametro=new O,this.parametro.id_empresa=t[0].id_empresa,this.parametro.modulo=t[0].modulo,this.parametro.id_usuario=t[0].id_usuario,this.parametro.assinatura=t[0].assinatura,this.parametro.parametro=t[0].parametro,this.parametro.user_insert=t[0].user_insert,this.parametro.user_update=t[0].user_update,this.setValues(),this.setEnableFilter(!0),this.onChangeParametros()},error:t=>{this.setValues(),this.setEnableFilter(!0),this.onChangeParametros()}})}updateParametros(){console.log("Salvando Par\xE2metros...",this.parametro.getParametro()),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id,this.refreshParametro(),this.inscricaoParametro=this.parametrosSrv.ParametroAtualiza(this.parametro).subscribe({next:e=>{this.appSnackBar.openSuccessSnackBar("Par\xE2metros Salvos Com Sucesso!","OK")},error:e=>{this.appSnackBar.openFailureSnackBar(`Falha Ao Salvar Os Par\xE2metros! ${Ne(e)}`,"OK")}})}refreshParametro(){let e=this.parametro.getParametro();Object(e).orderby=this.formulario.value.orderby,Object(e).id=this.formulario.value.id,Object(e).razao=this.formulario.value.razao.toUpperCase(),Object(e).cnpj_cpf=this.formulario.value.cnpj_cpf,this.parametro.parametro=JSON.stringify(e)}onChangeParametros(){this.enable_filter&&(this.refreshParametro(),this.change.emit(this.parametro))}onSaveConfig(){this.updateParametros()}onHide(){this.setHide(),this.changeHide.emit(this.hide)}hasValue(e){return this.formulario.get(e)?.value!=""}clearValue(e){e=="id"&&this.formulario.patchValue({id:""}),e=="razao"&&this.formulario.patchValue({razao:""}),e=="cnpj_cpf"&&this.formulario.patchValue({cnpj_cpf:""}),this.onChangeParametros()}ChangeValue(e,t){e=="id"&&this.formulario.patchValue({id:t}),e=="razao"&&this.formulario.patchValue({observacao:t}),e=="cnpj_cpf"&&this.formulario.patchValue({observacao:t})}openEmailDialog(){let e=new Qe;e.titulo="ENVIAR CONSULTA VIA E-MAIL",e.destinatario=this.globalService.usuario.email,e.escopo="T",e.labelBottomNao="Cancelar",e.labelBottonSim="Processar",e.id_empresa=this.globalService.empresa.id,e.pagina=this.controle_paginas.getPaginalAtual(),e.parametro=this.parametro;let t=new N;t.disableClose=!0,t.id="consulta-email",t.width="800px",t.data=e;let r=this.EmailDialog.open(Xe,t).beforeClosed().subscribe(s=>{})}openDownLoadDialog(){console.log("Pagina: ",this.controle_paginas.getPaginalAtual());let e=new et;e.titulo="DOWNLOAD DE CONSULTA",e.escopo="T",e.labelBottomNao="Cancelar",e.labelBottonSim="Processar",e.id_empresa=this.globalService.empresa.id,e.id_evento=1,e.pagina=this.controle_paginas.getPaginalAtual(),e.parametro=this.parametro;let t=new N;t.disableClose=!0,t.id="consulta-download",t.width="800px",t.data=e;let r=this.DownLoadDialog.open(tt,t).beforeClosed().subscribe(s=>{})}NoValidtouchedOrDirty(e){return!!(!this.formulario.get(e)?.valid&&(this.formulario.get(e)?.touched||this.formulario.get(e)?.dirty))}getMensafield(e){return this.formulario.get(e)?.errors?.message}static \u0275fac=function(t){return new(t||a)(f(Q),f(y),f(at),f(Ze),f(P),f(A),f(A))};static \u0275cmp=S({type:a,selectors:[["app-formulario-filtro-empresa"]],inputs:{paramName:[0,"PARAMNAME","paramName"],retorno:[0,"RETORNO","retorno"],email:[0,"EMAIL","email"],download:[0,"DOWNLOAD","download"],controle_paginas:[0,"CONTROLE_PAGINAS","controle_paginas"],hide:[0,"HIDE","hide"]},outputs:{change:"changeParametro",changeHide:"changeHide"},decls:13,vars:3,consts:[["color","white",1,"toolbar-filtro"],[1,"filtro-com-icones"],[1,"titulo"],["matTooltipPosition","above","matTooltip","Limpar Par\xE2metros","matTooltipPosition","above",3,"click"],["matTooltipPosition","above","matTooltip","Salvar Par\xE2metros","matTooltipPosition","above",3,"click"],["matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click",4,"ngIf"],["matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click",4,"ngIf"],["matTooltipPosition","above","matTooltip","Mostrar/Esconder","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup",4,"ngIf"],["matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click"],["matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["field","","appearance","outline",1,"col-max"],["formControlName","orderby",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","formControlName","cnpj_cpf",1,"uppercase"],[1,"col-med-1"],["appearance","outline",1,"uppercase-input","column-span-2"],["matInput","","formControlName","razao"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"span",1)(2,"span",2),l(3,"Filtro da Pesquisa"),i(),o(4,"mat-icon",3),g("click",function(){return r.onlimparParametros()}),l(5,"clear"),i(),o(6,"mat-icon",4),g("click",function(){return r.onSaveConfig()}),l(7,"save"),i(),d(8,Ht,2,0,"mat-icon",5)(9,Ut,2,0,"mat-icon",6),o(10,"mat-icon",7),g("click",function(){return r.onHide()}),l(11,"visibility"),i()()(),d(12,qt,23,5,"form",8)),t&2&&(n(8),m("ngIf",r.email),n(),m("ngIf",r.download),n(3),m("ngIf",!r.hide))},dependencies:[x,R,W,Z,D,re,ie,I,Be,oe,ee,J,U,$,K,Y,q],styles:[".grupo-select[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{margin-top:4px;padding:0;height:24px;width:24px;line-height:24px;vertical-align:middle;transform:translateY(1px)}"]})};function Wt(a,e){if(a&1){let t=E();o(0,"tr")(1,"td")(2,"div",10)(3,"mat-label",11),l(4),L(5,"zeroFill"),i()(),o(6,"div"),u(7,"mat-label",11),i()(),o(8,"td")(9,"div")(10,"mat-label",12),l(11),L(12,"truncate"),i()(),o(13,"div")(14,"mat-label",11),l(15),i()()(),o(16,"td")(17,"div")(18,"mat-label",11),l(19),L(20,"cnpjcpf"),i()(),o(21,"div"),u(22,"mat-label",11),i()(),o(23,"td",13)(24,"barra-acoes",14),g("changeOpcao",function(s){let p=b(t),k=p.$implicit,C=p.index,ue=c();return v(ue.escolha(s,C,k))}),i()()()}if(a&2){let t=e.$implicit;n(4),h("",he(5,5,t.id)," "),n(6),m("matTooltip",t.razao),n(),F(Ce(12,7,t.razao,50)),n(4),F(t.email),n(4),h("",he(20,10,t.cnpj_cpf)," ")}}var ce=class a{constructor(e,t,r,s,p,k){this.globalService=e;this.empresaSrv=t;this.route=r;this.router=s;this.appSnackBar=p;this.empresaDialog=k}viewPort;inscricaoEmpresa;empresas=[];controlePaginas=new M(0,0);tamPagina=50;retorno=!1;parametro=new O;hide=!1;ngOnInit(){}ngOnDestroy(){this.inscricaoEmpresa?.unsubscribe()}escolha(e,t,r){this.openEmpresaDialog(e,t,r)}onHome(){this.router.navigate([""])}getAcoes(){return T}getEmpresas(e=2){let t=new me;t=ft(t,this.parametro.getParametro()),e==1?t.contador="S":(t.pagina=this.controlePaginas.getPaginalAtual(),t.tamPagina=this.controlePaginas.getTamPagina()),this.inscricaoEmpresa=this.empresaSrv.getEmpresasParametro_01(t).subscribe({next:r=>{e==2?this.empresas=r:(this.controlePaginas=new M(this.tamPagina,r.total==0?1:r.total),this.getEmpresas())},error:r=>{this.empresas=[],this.controlePaginas=new M(this.tamPagina,0)}})}getTexto(){return Fe}onChangePage(){this.getEmpresas()}onChangeHide(e){this.hide=e}onChangeParametros(e){this.parametro=e,this.getEmpresas(1)}openEmpresaDialog(e=3,t,r){let s=new se;r==null&&(r=new H,r.cadastr=ke(new Date)),s.opcao=e,s.processar=!1,s.empresa=r;let p=new N;p.disableClose=!0,p.id="dialog-empresa-component",p.width="80vw",p.height="80vh",p.disableClose=!0,p.panelClass="dialog-font-small",p.data=s;let k=this.empresaDialog.open(ne,p).beforeClosed().subscribe(C=>{if(C?.processar)switch(e){case 1:this.empresas.push(C.empresa);break;case 2:t>=0&&(this.empresas[t]=C.empresa);break;case 4:this.empresas.splice(t,1);break;default:break}})}static \u0275fac=function(t){return new(t||a)(f(y),f(ae),f(xe),f(ye),f(P),f(A))};static \u0275cmp=S({type:a,selectors:[["app-crud-empresa"]],viewQuery:function(t,r){if(t&1&&_e(Oe,5),t&2){let s;be(s=ve())&&(r.viewPort=s.first)}},decls:26,vars:7,consts:[[1,"toolbar-alinhada"],[1,"example-spacer"],[3,"changePage","controle"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above",3,"click","matTooltip"],["PARAMNAME","empresas",3,"changeParametro","changeHide","HIDE","EMAIL","DOWNLOAD","CONTROLE_PAGINAS"],[1,"Browse_Lanc"],[1,"coluna-cabec"],[4,"ngFor","ngForOf"],[1,"alinha_centro"],[1,"Browse_Lanc_td"],["matTooltipPosition","above",1,"Browse_Lanc_td",3,"matTooltip"],[1,"acoes"],[3,"changeOpcao"]],template:function(t,r){t&1&&(o(0,"div",0)(1,"mat-toolbar")(2,"span",1),l(3,"Empresas: "),i(),o(4,"app-navegator",2),g("changePage",function(){return r.onChangePage()}),i(),o(5,"button",3),g("click",function(){return r.onHome()}),o(6,"mat-icon"),l(7,"home"),i()(),o(8,"button",4),g("click",function(){return r.getEmpresas()}),o(9,"mat-icon"),l(10,"rotate_right"),i()(),o(11,"button",5),g("click",function(){return r.escolha(r.getAcoes().Inclusao,-1)}),o(12,"mat-icon"),l(13,"add_circle_outline"),i()()()(),o(14,"app-formulario-filtro-empresa",6),g("changeParametro",function(p){return r.onChangeParametros(p)})("changeHide",function(p){return r.onChangeHide(p)}),i(),o(15,"table",7)(16,"tr",8)(17,"th"),l(18,"C\xF3digo"),i(),o(19,"th"),l(20,"Razao"),i(),o(21,"th"),l(22,"CNPJ"),i(),o(23,"th"),l(24,"A\xC7\xD5ES"),i()(),d(25,Wt,25,12,"tr",9),i()),t&2&&(n(4),m("controle",r.controlePaginas),n(7),m("matTooltip",r.getTexto().incluir),n(3),m("HIDE",r.hide)("EMAIL",!0)("DOWNLOAD",!0)("CONTROLE_PAGINAS",r.controlePaginas),n(11),m("ngForOf",r.empresas))},dependencies:[x,Z,D,I,X,ee,Je,Ye,pe,it,rt,ot],styles:[".form-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin:20px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:right;padding:1em;border-bottom:1px solid #ccc;background-color:#f5f5f5;position:sticky;top:0;z-index:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:1em;border-top:1px solid #ccc}"]})};var Zt=[{path:"",redirectTo:"usuarios",pathMatch:"full"},{path:"usuarios",component:ce}],de=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=G({type:a});static \u0275inj=z({imports:[ge.forChild(Zt),ge]})};var ht=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=G({type:a});static \u0275inj=z({imports:[Se,de,ze,De,Ie,Ge]})};export{ht as EmpresaModule};
