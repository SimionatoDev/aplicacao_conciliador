import{a as W,b as X,c as Y,d as Z}from"./chunk-CIB24OPD.js";import{b as te}from"./chunk-27ZIYVJD.js";import{a as ae}from"./chunk-TCSEHU2G.js";import{a as ee}from"./chunk-QMBS7RXV.js";import{a as x,b as f}from"./chunk-QXSUWR23.js";import{a as D,d as _,e as O,f as z}from"./chunk-YFACCMPI.js";import{A as R,B as L,C as q,E as J,F as H,O as Q,b as M,d as b,e as N,f as k,g as F,h as G,i as T,j as V,n as B,o as j,s as P,t as w,w as $,x as K}from"./chunk-BUQZUOJ6.js";import{Ib as n,Jb as a,Kb as p,Ob as E,Rb as v,Tb as m,Yc as A,Zc as U,bc as l,cc as I,db as o,dc as c,eb as d,na as C,vb as u,wa as y,xa as S,zb as s}from"./chunk-QE3WHX6I.js";var ie=class{processar=!1;trocasenha=!1;erro=!1;cancelar=!1;opcao=3;usuario=new D};var g=class{id_empresa=0;codigo=0;descricao="";pagina=0;tamPagina=50;contador="N";orderby="";sharp=!1};function le(e,t){if(e&1){let i=E();n(0,"button",31),v("click",function(){y(i);let h=m();return S(h.actionFunction())}),n(1,"mat-icon"),l(2,"check"),a(),l(3),a()}if(e&2){let i=m();o(3),c(" ",i.acao," ")}}function se(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("cadastr")," ")}}function me(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("razao")," ")}}function ue(e,t){if(e&1&&(n(0,"mat-option",35),l(1),a()),e&2){let i=t.$implicit;s("value",i.codigo),o(),c(" ",i.descricao," ")}}function ce(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m(2);o(),c("",i.getMensafield("grupo")," ")}}function pe(e,t){if(e&1&&(n(0,"mat-form-field",32)(1,"mat-label"),l(2,"Grupo Do Usu\xE1rio"),a(),n(3,"mat-select",33),u(4,ue,2,2,"mat-option",34),a(),u(5,ce,2,1,"mat-error",14),a()),e&2){let i=m();o(4),s("ngForOf",i.grupos),o(),s("ngIf",i.NoValidtouchedOrDirty("grupo"))}}function de(e,t){if(e&1&&(n(0,"mat-form-field",32)(1,"mat-label"),l(2,"Grupo"),a(),p(3,"input",36),a()),e&2){let i=m();o(3),s("readonly",i.readOnly)}}function fe(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("cnpj_cpf")," ")}}function ge(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("rua")," ")}}function he(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("nro")," ")}}function ve(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("complemento")," ")}}function _e(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("bairro")," ")}}function be(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("cidade")," ")}}function xe(e,t){if(e&1&&(n(0,"mat-option",35),l(1),a()),e&2){let i=t.$implicit;s("value",i.sigla),o(),c(" ",i.sigla," ")}}function Ce(e,t){if(e&1&&(n(0,"mat-form-field",32)(1,"mat-label"),l(2,"Estado:"),a(),n(3,"mat-select",37),u(4,xe,2,2,"mat-option",34),a()()),e&2){let i=m();o(4),s("ngForOf",i.ufs)}}function ye(e,t){if(e&1&&(n(0,"mat-form-field",32)(1,"mat-label"),l(2,"Estado:"),a(),p(3,"input",38),a()),e&2){let i=m();o(3),s("readonly",i.readOnly)}}function Se(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("cep")," ")}}function Ee(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("email")," ")}}function Ie(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("tel1")," ")}}function Ae(e,t){if(e&1&&(n(0,"mat-error"),l(1),a()),e&2){let i=m();o(),c("",i.getMensafield("tel2")," ")}}var oe=class e{constructor(t,i,r,h,Ue,De,Oe,Me,Ne){this.formBuilder=t;this.usuarioService=i;this.grupoUserService=r;this.globalService=h;this.usuarioSrv=Ue;this.appSnackBar=De;this.simNaoPipe=Oe;this.data=Me;this.dialogRef=Ne;this.formulario=t.group({id:[{value:"",disabled:!0}],ativo:[{value:"",disabled:!0}],razao:[{value:""},[f(3,40,!0)]],cadastr:[{value:""},[Z(!0)]],cnpj_cpf:[{value:""},[Y(!1)]],grupo:[{value:""}],grupo_:[{value:""}],rua:[{value:""},[f(3,80,!1)]],nro:[{value:""},[f(1,10,!1)]],complemento:[{value:""},[f(0,30)]],bairro:[{value:""},[f(3,40,!1)]],cidade:[{value:""},[f(3,40,!1)]],uf:[{value:""},[f(2,2,!1)]],uf_:[{value:""}],cep:[{value:""},[X(!1)]],tel1:[{value:""},[f(0,23,!1)]],tel2:[{value:""},[f(0,23)]],email:[{value:""},[b.required,b.email]]}),this.formulario.get("cnpj_cpf")?.valueChanges.subscribe(re=>{let ne=re?.replace(/\D/g,"")||"";this.cpfOuCnpjMask=ne.length>11?"00.000.000/0000-00":"000.000.000-00"}),this.ufs=this.estadoSrv.getEstados(),this.getGruposUsuarios()}formulario;grupos=[];ufs=[];erro;acao="Sem Defini\xE7\xE3o";idAcao=1;readOnly=!0;inscricaoGetUsuario;inscricaoGrupousuario;inscricaoAcao;labelCadastro="";estadoSrv=new W;respostas=[{sigla:"S",descricao:"SIM"},{sigla:"N",descricao:"N\xC3O"}];cpfOuCnpjMask="000.000.000-00";ngOnInit(){this.idAcao=this.data.opcao,this.setAcao(this.data.opcao)}ngOnDestroy(){this.inscricaoAcao?.unsubscribe(),this.inscricaoGetUsuario?.unsubscribe(),this.inscricaoGrupousuario?.unsubscribe()}actionFunction(){this.formulario.valid?this.executaAcao():(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xE1rio Com Campos Inv\xE1lidos.","OK"))}closeModal(){this.data.processar=!0,this.dialogRef.close(this.data)}setValue(){this.formulario.setValue({id:this.data.usuario.id,ativo:this.simNaoPipe.transform(this.data.usuario.ativo),razao:this.data.usuario.razao,cadastr:this.data.usuario.cadastr,grupo:this.data.usuario.grupo,grupo_:this.idAcao==3||this.idAcao==4?this.data.usuario.grupo_descricao:"",cnpj_cpf:this.data.usuario.cnpj_cpf,rua:this.data.usuario.rua,nro:this.data.usuario.nro,complemento:this.data.usuario.complemento,bairro:this.data.usuario.bairro,cidade:this.data.usuario.cidade,uf:this.data.usuario.uf,uf_:this.idAcao==3||this.idAcao==4?this.data.usuario.uf:"",cep:this.data.usuario.cep,tel1:this.data.usuario.tel1,tel2:this.data.usuario.tel2,email:this.data.usuario.email})}getGruposUsuarios(t=2){let i=new g;i.id_empresa=this.globalService.getEmpresa().id,this.inscricaoGetUsuario=this.grupoUserService.getGruposusuariosParametro_01(i).subscribe({next:r=>{this.grupos=r,this.setValue()},error:r=>{}})}getLabelCancel(){return this.idAcao==3?"Voltar":"Cancelar"}setAcao(t){switch(+t){case 1:this.acao="Gravar",this.labelCadastro="Usu\xE1rios - Inclus\xE3o.",this.readOnly=!1;break;case 2:this.acao="Gravar",this.labelCadastro="Usu\xE1rios - Altera\xE7\xE3o.",this.readOnly=!1;break;case 3:this.acao="Voltar",this.labelCadastro="Usu\xE1rios - Consulta.",this.readOnly=!0;break;case 4:this.acao="Excluir",this.labelCadastro="Usu\xE1rios - Exclus\xE3o.",this.readOnly=!0;break;case 5:this.acao="Gravar",this.labelCadastro="Usu\xE1rios - Atualiza\xE7\xE3o",this.readOnly=!1;break;default:break}}executaAcao(){switch(this.data.usuario.razao=this.formulario.value.razao.toUpperCase(),this.data.usuario.cnpj_cpf=this.formulario.value.cnpj_cpf,this.data.usuario.cadastr=this.formulario.value.cadastr,this.data.usuario.rua=this.formulario.value.rua.toUpperCase(),this.data.usuario.nro=this.formulario.value.nro.toUpperCase(),this.data.usuario.complemento=this.formulario.value.complemento.toUpperCase(),this.data.usuario.bairro=this.formulario.value.bairro.toUpperCase(),this.data.usuario.cidade=this.formulario.value.cidade.toUpperCase(),this.data.usuario.uf=this.formulario.value.uf,this.data.usuario.cep=this.formulario.value.cep,this.data.usuario.tel1=this.formulario.value.tel1,this.data.usuario.tel2=this.formulario.value.tel2,this.data.usuario.email=this.formulario.value.email,this.data.usuario.senha="",this.data.usuario.grupo=this.formulario.value.grupo,+this.idAcao){case 1:this.data.usuario.user_insert=this.globalService.getUsuario().id,console.log("usuario =>",this.data.usuario),this.inscricaoAcao=this.usuarioService.usuarioInsert(this.data.usuario).subscribe({next:t=>{this.appSnackBar.openSuccessSnackBar("Usu\xE1rio Incluido Com Sucesso !","OK"),this.data.usuario=t,this.getUsuario(this.data.usuario)},error:t=>{console.log("error =>",t),this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xE3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")}});break;case 2:this.data.usuario.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.usuarioService.usuarioUpdate(this.data.usuario).subscribe({next:t=>{this.appSnackBar.openSuccessSnackBar("Usu\xE1rio Alterado Com Sucesso !","OK"),this.data.usuario=t,this.getUsuario(this.data.usuario)},error:t=>{this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xE7\xE3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")}});break;case 5:this.data.usuario.user_update=this.globalService.getUsuario().id,this.inscricaoAcao=this.usuarioService.usuarioUpdate(this.data.usuario).subscribe({next:t=>{this.appSnackBar.openSuccessSnackBar("Usu\xE1rio Alterado Com Sucesso !","OK"),this.data.usuario=t,this.getUsuario(this.data.usuario)},error:t=>{this.appSnackBar.openFailureSnackBar(`Erro Na Altera\xE7\xE3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")}});break;case 4:this.inscricaoAcao=this.usuarioService.usuarioDelete(this.data.usuario.id_empresa,this.data.usuario.id).subscribe({next:t=>{this.appSnackBar.openSuccessSnackBar("Usu\xE1rio Excluido Com Sucesso !","OK"),this.data.usuario=t,this.closeModal()},error:t=>{this.appSnackBar.openFailureSnackBar(`Erro Na Inclus\xE3o ${t.error.tabela} - ${t.error.erro} - ${t.error.message}`,"OK")}});break;default:break}}getAcoes(){return x}NoValidtouchedOrDirty(t){return!!(!this.formulario.get(t)?.valid&&(this.formulario.get(t)?.touched||this.formulario.get(t)?.dirty))}getMensafield(t){return this.formulario.get(t)?.errors?.message}setEmailReadOnly(){return this.idAcao==5?!0:this.readOnly}getUsuario(t){this.inscricaoGetUsuario=this.usuarioSrv.getUsuario(t.id_empresa,t.id).subscribe({next:i=>{this.data.usuario=i,this.closeModal()},error:i=>{this.appSnackBar.openFailureSnackBar("Problemas na Atualiza\xE7\xE3o Do Usu\xE1rio","OK"),this.closeModal}})}static \u0275fac=function(i){return new(i||e)(d(V),d(_),d(ae),d(O),d(_),d(z),d(ee),d(K),d($))};static \u0275cmp=C({type:e,selectors:[["app-usuario-dialog"]],decls:93,vars:33,consts:[[1,"toolbar-alinhada","dialog-header"],["color","primary"],[1,"example-spacer"],[1,"button-container"],["mat-raised-button","","color","#FFFFFF",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-content"],["autocomplete","off",1,"form-container",3,"formGroup"],[1,"moldura"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","id"],["matInput","","formControlName","ativo"],["matInput","","formControlName","cadastr","mask","00/00/0000","placeholder","DD/MM/AAAA","placeholder","DD/MM/AAAA","readonly","true",3,"dropSpecialCharacters"],[4,"ngIf"],[1,"col-med-1"],["appearance","outline",1,"uppercase-input","col-max"],["matInput","","formControlName","razao","autofocus","",3,"readonly"],[1,"col-med-2"],["field","","appearance","outline","class","col-max",4,"ngIf"],["matInput","","formControlName","cnpj_cpf",3,"mask","readonly"],["appearance","outline",1,"col-max","column-span-2"],["matInput","","formControlName","rua","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","nro","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","complemento","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","bairro","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","cidade","oninput","this.value = this.value.toUpperCase()",3,"readonly"],["matInput","","formControlName","cep","mask","99999-999",3,"readonly"],["matInput","","formControlName","email",3,"readonly"],["matInput","","formControlName","tel1","mask","(00) 0 0000-0000",3,"readonly"],["matInput","","formControlName","tel2","mask","(00) 0 0000-0000",3,"readonly"],["mat-raised-button","","color","#FFFFFF",3,"click"],["field","","appearance","outline",1,"col-max"],["formControlName","grupo"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","grupo_",3,"readonly"],["formControlName","uf"],["matInput","","formControlName","uf_",3,"readonly"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"mat-toolbar",1)(2,"span",2)(3,"mat-label"),l(4),a()(),n(5,"div",3),u(6,le,4,1,"button",4),n(7,"button",5),v("click",function(){return r.closeModal()}),n(8,"mat-icon"),l(9,"cancel"),a(),l(10),a()()()(),n(11,"mat-dialog-content",6)(12,"form",7)(13,"div",8)(14,"div",9)(15,"mat-form-field",10)(16,"mat-label"),l(17,"C\xD3DIGO"),a(),p(18,"input",11),a(),n(19,"mat-form-field",10)(20,"mat-label"),l(21,"Ativo"),a(),p(22,"input",12),a(),n(23,"mat-form-field",10)(24,"mat-label"),l(25,"Cadastro"),a(),p(26,"input",13),u(27,se,2,1,"mat-error",14),a()(),n(28,"div",15)(29,"mat-form-field",16)(30,"mat-label"),l(31,"Raz\xE3o Social"),a(),p(32,"input",17),u(33,me,2,1,"mat-error",14),a()(),n(34,"div",18),u(35,pe,6,2,"mat-form-field",19)(36,de,4,1,"mat-form-field",19),n(37,"mat-form-field",10)(38,"mat-label"),l(39,"CNPJ/CPF"),a(),p(40,"input",20),u(41,fe,2,1,"mat-error",14),a()(),n(42,"div",9)(43,"mat-form-field",21)(44,"mat-label"),l(45,"Endere\xE7o:"),a(),p(46,"input",22),u(47,ge,2,1,"mat-error",14),a(),n(48,"mat-form-field",10)(49,"mat-label"),l(50,"N\xFAmero"),a(),p(51,"input",23),u(52,he,2,1,"mat-error",14),a()(),n(53,"div",15)(54,"mat-form-field",10)(55,"mat-label"),l(56,"Complemento:"),a(),p(57,"input",24),u(58,ve,2,1,"mat-error",14),a()(),n(59,"div",9)(60,"mat-form-field",10)(61,"mat-label"),l(62,"Bairro:"),a(),p(63,"input",25),u(64,_e,2,1,"mat-error",14),a(),n(65,"mat-form-field",10)(66,"mat-label"),l(67,"Cidade:"),a(),p(68,"input",26),u(69,be,2,1,"mat-error",14),a(),u(70,Ce,5,1,"mat-form-field",19)(71,ye,4,1,"mat-form-field",19),n(72,"mat-form-field",10)(73,"mat-label"),l(74,"CEP:"),a(),p(75,"input",27),u(76,Se,2,1,"mat-error",14),a()(),n(77,"div",9)(78,"mat-form-field",10)(79,"mat-label"),l(80,"E-Mail:"),a(),p(81,"input",28),u(82,Ee,2,1,"mat-error",14),a(),n(83,"mat-form-field",10)(84,"mat-label"),l(85,"Telefone 1:"),a(),p(86,"input",29),u(87,Ie,2,1,"mat-error",14),a(),n(88,"mat-form-field",10)(89,"mat-label"),l(90,"Telefone 2:"),a(),p(91,"input",30),u(92,Ae,2,1,"mat-error",14),a()()()()()),i&2&&(o(4),I(r.labelCadastro),o(2),s("ngIf",r.idAcao!=3),o(4),c(" ",r.getLabelCancel()," "),o(2),s("formGroup",r.formulario),o(14),s("dropSpecialCharacters",!1),o(),s("ngIf",r.NoValidtouchedOrDirty("cadastr")),o(5),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("razao")),o(2),s("ngIf",r.idAcao!=r.getAcoes().Consulta&&r.idAcao!=r.getAcoes().Exclusao&&r.idAcao!=r.getAcoes().Atualizacao),o(),s("ngIf",r.idAcao==r.getAcoes().Consulta||r.idAcao==r.getAcoes().Exclusao),o(4),s("mask",r.cpfOuCnpjMask)("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("cnpj_cpf")),o(5),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("rua")),o(4),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("nro")),o(5),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("complemento")),o(5),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("bairro")),o(4),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("cidade")),o(),s("ngIf",r.idAcao!=r.getAcoes().Consulta&&r.idAcao!=r.getAcoes().Exclusao),o(),s("ngIf",r.idAcao==r.getAcoes().Consulta||r.idAcao==r.getAcoes().Exclusao),o(4),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("cep")),o(5),s("readonly",r.setEmailReadOnly()),o(),s("ngIf",r.NoValidtouchedOrDirty("email")),o(4),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("tel1")),o(4),s("readonly",r.readOnly),o(),s("ngIf",r.NoValidtouchedOrDirty("tel2")))},dependencies:[A,U,B,j,R,P,H,J,L,q,Q,w,F,M,N,k,G,T,te],styles:['[_nghost-%COMP%]{--mat-form-field-container-text-size: 12px;--mat-form-field-container-text-font: "Arial";--mat-form-field-container-text-weight: 400;--mat-form-field-label-text-size: 12px;--mat-form-field-label-text-font: "Arial";--mat-form-field-label-text-weight: 600;--mat-form-field-floating-label-text-size: 11px;--mat-form-field-floating-label-text-font: "Arial";--mat-form-field-floating-label-text-weight: 600;--mat-form-field-subscript-text-size: 10px;--mat-form-field-subscript-text-font: "Arial";--mat-form-field-subscript-text-weight: 400;--mat-select-trigger-text-size: 12px;--mat-select-trigger-text-font: "Arial";--mat-select-trigger-text-weight: 400;--mat-select-panel-item-text-size: 12px;--mat-select-panel-item-text-font: "Arial";--mat-select-panel-item-text-weight: 400}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:right;padding:1em;border-bottom:1px solid #ccc;background-color:#f5f5f5;position:sticky;top:0;z-index:1}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:1em;border-top:1px solid #ccc}']})};export{ie as a,g as b,oe as c};
